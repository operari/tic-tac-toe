"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _extendableBuiltin(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),UniqueArray=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"unique",value:function n(){this[0].sort(function(t,e){return t-e});var n=[];if(this[0].length>1)this[0].reduce(function(t,e,s,i){return t-e?(n.push(t),i[i.length-1]===i[s]&&n.push(e)):2===i.length&&n.push(e),e});else{if(!this[0].length)throw new Error("The array does not have a suitable length!");n=this[0]}return n}}]),e}(_extendableBuiltin(Array)),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Animation=function(){function t(){_classCallCheck(this,t),this.on=!0,this.timing=1e3,this.__proto__.CssClasses_={ANIMATED:"animated",HIDDEN:"is-hidden",ATTENTION_SEEKERS:["bounce","flash","headShake","headBeat","jello","pulse","rubberBand","shake","swing","tada","wobble","shakeHard"],BOUNCING_ENTRANCES:["bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp"],BOUCING_EXITS:["bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp"],FADING_ENTRANCES:["fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeInScale"],FADING_EXITS:["fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","fadeOutScale","fadeOutScaleBig"],FLIPPERS:["flip","flipInX","flipInY","flipOutX","flipOutY"],LIGHTSPEED:["lightSpeedIn","lightSpeedOut"],ROTATING_ENTRANCES:["rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight"],ROTATING_EXITS:["rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight"],SLIDING_ENTRANCES:["slideInDown","slideInLeft","slideInRight","slideInUp"],SLIDING_EXITS:["slideOutDown","slideOutLeft","slideOutRight","slideOutUp"],SPECIALS:["hinge","jackInTheBox","rollin","rollOut","lock"],ZOOMING_ENTRANCES:["zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp"]}}return _createClass(t,[{key:"getSection_",value:function(t){var e=/^.+(?=_\d+$)/.exec(t);return!!e&&e[0].toUpperCase()}},{key:"getClassPosition_",value:function(t){return/\d+$/.exec(t)[0]}},{key:"animate",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.timing,a=arguments[4];return new Promise(function(o,r){""==e&&o();var l=s.getSection_(e),c=s.getClassPosition_(e);t&&(t.classList.contains(s.CssClasses_.HIDDEN)&&t.classList.remove(s.CssClasses_.HIDDEN),t.classList.add(s.CssClasses_.ANIMATED),t.classList.add(s.CssClasses_[l][c]),setTimeout(function(){n?(t.classList.remove(s.CssClasses_.ANIMATED),t.classList.remove(s.CssClasses_[l][c]),a&&t.classList.add(s.CssClasses_.HIDDEN),window.savedAnimatesСlass&&t.classList.remove(window.savedAnimatesСlass)):window.savedAnimatesСlass=s.CssClasses_[l][c],o()},s.on&&i))})}},{key:"find",value:function(t){var e=this.getSection_(t);if(e){var n=this.getClassPosition_(t);return this.CssClasses_[e][n]}for(var s in this.CssClasses_){var i=this.CssClasses_[s];if(Array.isArray(i)){var a=i.findIndex(function(e){return e===t});if(~a){var o={section:s.toLowerCase(),index:a};return o.copy=o.section+"_"+o.index,o}}}throw new Error("Class "+t+" not found!")}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Sound=function(){function t(e){_classCallCheck(this,t),this.element_=null,this.audio_=null,this.playing_="",this.muted_=!1,this.timings={hover:{start:0,end:.5,priority:1},click:{start:1,end:1.5,priority:2},tick:{start:2,end:2.5,priority:3},dice:{start:3,end:3.5,priority:3},flash:{start:4,end:5,priority:3},draw:{start:5.5,end:6,priority:4},win:{start:6.5,end:7.6,priority:4},point:{start:8,end:9,priority:4},swing:{start:9.5,end:10.4,priority:6},level:{start:11,end:11.7,priority:7},coin:{start:12,end:12.6,priority:4},will:{start:13,end:14.5,priority:5},tada:{start:15.5,end:17,priority:3},lock:{start:17.5,end:18.5,priority:3},coins:{start:19,end:19.8,priority:3},coin1:{start:20.5,end:22,priority:3}},this.__proto__.CssIds_={MUTE_KEY:"m",PLAYER:"audio_player",CONTAINER:"wrapper"},this.__proto__.CssClasses_={HIDDEN:"is-hidden",MUTE:"sound__toggle"},this.__proto__.Constant_={MUTE_TIMING:500,FILENAME:"sound.mp3",PATH:"blocks/sound/"},this.init()}return _createClass(t,[{key:"insertPlayer_",value:function(){this.removePlayer_();var t=document.getElementById(this.CssIds_.CONTAINER);if(!t)throw new Error("Element wrapper not found!");var e='\n\t\t\t\t<div id="audio_player" class="sound">\n\t\t\t\t\t<audio preload="metadata" '+(this.muted_?"muted":"")+'></audio>\n\t\t\t\t\t<button id="toggle_sound" class="ml-button--dim sound__toggle">\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="#585f80" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n\t\t\t\t\t\t<svg class="is-hidden" xmlns="http://www.w3.org/2000/svg" width="43" height="43" fill="#585f80" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n\t\t\t\t\t\t<span id="m" class="tttoe__key">m</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t';t.insertAdjacentHTML("beforeend",e),this.element_=document.getElementById(this.CssIds_.PLAYER),this.audioTrack_()}},{key:"removePlayer_",value:function(){var t=document.getElementById(this.CssIds_.PLAYER);t&&t.remove()}},{key:"audioTrack_",value:function(){this.Constant_.FILENAME&&(this.audio_=this.element_.querySelector("audio"),this.audio_.src=this.Constant_.PATH+this.Constant_.FILENAME+"?v="+Date.now())}},{key:"compareTracksPriority_",value:function(t){return!(this.playing_&&this.timings[this.playing_].priority>=this.timings[t].priority)}},{key:"getSoundInterval",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1e3*(this.timings[t].end-this.timings[t].start)+e}},{key:"play",value:function(t){var e=this;if(this.audio_)return new Promise(function(n,s){if(e.compareTracksPriority_(t)){e.playing_&&setTimeout(function(){e.stop(),n()},e.getSoundInterval(e.playing_)),e.playing_=t,e.audio_.currentTime=e.timings[t].start;var i=e.audio_.play();void 0!==i&&i.then(function(s){e.timerId=setTimeout(function(){e.stop(),n()},e.getSoundInterval(t))})["catch"](function(t){console.info(t)})}else n()})}},{key:"stop",value:function(){clearTimeout(this.timerId),this.audio_.pause(),this.audio_.currentTime=0,this.playing_=""}},{key:"mute",value:function(){this.audio_.muted=!this.audio_.muted}},{key:"init",value:function(){var t=this,e=function(e){t.insertPlayer_();var n=document.querySelector("."+t.CssClasses_.MUTE);n.addEventListener("click",function(e){t.play("click");var n=e.currentTarget;n.children[+!t.audio_.muted].classList.remove(t.CssClasses_.HIDDEN),n.children[+t.audio_.muted].classList.add(t.CssClasses_.HIDDEN),setTimeout(function(e){return t.mute()},t.Constant_.MUTE_TIMING)}),n.addEventListener("mouseenter",function(e){t.play("hover")}),document.addEventListener("keyup",function(e){e.key&&"m"===e.key.toLowerCase()&&document.getElementById(t.CssIds_.MUTE_KEY).parentNode.click()})};"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Dice=function(){function t(e){_classCallCheck(this,t),this.container_=e,this.sides_=6,this.dice_=null,this.animate_=!0,this.__proto__.CssClasses_={SIDE:"dice__side",DOT:"dice__dot",HIDDEN:"is-hidden",DICE:"dice",AUTO:"layout__auto",ANIMATED:"animated"},this.__proto__.Constant_={ANIM_TIMING:1e3},this.init()}return _createClass(t,[{key:"makeDots_",value:function(t,e){if(t){for(var n=0;n<e;n++){var s=document.createElement("div");s.className=this.CssClasses_.DOT,t.appendChild(s)}return!0}return!1}},{key:"create",value:function(){this.dice_=document.createElement("div"),this.dice_.className=this.CssClasses_.DICE+" "+this.CssClasses_.AUTO+(this.animate_?" "+this.CssClasses_.ANIMATED+" "+this.CssClasses_.ROTATEIN:"");for(var t=0,e=t+1;t<this.sides_;t++,e++){var n=document.createElement("div");n.className=this.CssClasses_.SIDE+" "+this.CssClasses_.SIDE+"--"+e+" "+this.CssClasses_.HIDDEN,this.makeDots_(n,e)&&this.dice_.appendChild(n)}return this.container_?void this.container_.appendChild(this.dice_):this.dice_}},{key:"play",value:function(){this.container_&&this.container_.classList.remove(this.CssClasses_.HIDDEN);var t=getRandomInt(0,this.sides_);if(this.dice_.children[t].classList.remove(this.CssClasses_.HIDDEN),this.animate_){var e=new Animation;e.animate(this.dice_,"rotating_entrances_0",!0,this.Constant_.ANIM_TIMING)}return t+1}},{key:"init",value:function(){this.container_&&this.create()}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Confetti=function(){function t(e,n){return _classCallCheck(this,t),this.id_=e,this.count_=n,this.init()}return _createClass(t,[{key:"create",value:function(){var t=document.createElement("div");if(t.id=this.id_,t.className="confetti",t){for(var e=this.count_;e>-1;){var n=document.createElement("div");n.className="confetti__"+e,t.appendChild(n),e--}return t}throw new Error("Element confetti not found!")}},{key:"init",value:function(){return this.create()}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Pagination=function(){function t(e,n){_classCallCheck(this,t),this.allElements=e,this.limitPerPage=n,this.__proto__.CssClasses_={BLOCK:"pagination",CONTAINER:"pagination__marked-list",LIST:"pagination__list",LINK:"pagination__link",ACTIVE:"pagination__link--active",MIX_BLOCK:"tttoe__statistics-pagination",MIX_ACTION:"tttoe__button-action"}}return _createClass(t,[{key:"create",value:function(){var t=this,e=function(){for(var e="",n=1;n<=t.countPages_;n++)e+='<li class="'+t.CssClasses_.LIST+'"><a href="#" class="'+t.CssClasses_.MIX_ACTION+" "+t.CssClasses_.LINK+" "+(1===n?t.CssClasses_.ACTIVE:"")+'">'+n+"</a></li>";return e},n='<div class="'+this.CssClasses_.BLOCK+" "+this.CssClasses_.MIX_BLOCK+'">\n\t\t\t<ul class="'+this.CssClasses_.CONTAINER+'">\n\t\t\t\t'+e()+"\n\t\t\t</ul>\n\t\t</div>";return n}},{key:"toggleActive",value:function(){var t=this,e=document.querySelector("."+this.CssClasses_.BLOCK),n=function(n){var s=n.target;if("A"===s.tagName){var i=e.querySelectorAll("."+t.CssClasses_.LINK);Array.from(i).forEach(function(e){return e.classList.remove(t.CssClasses_.ACTIVE)}),s.classList.add(t.CssClasses_.ACTIVE)}};e.addEventListener("click",n)}},{key:"countPages_",get:function(){return this.allElements/this.limitPerPage<=1?1:this.allElements/this.limitPerPage}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),ToggleScreen=function(){function t(e){_classCallCheck(this,t),this.elem=e||document.documentElement}return _createClass(t,[{key:"open",value:function(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()}},{key:"close",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),SignIn=function(){function t(){_classCallCheck(this,t),this.lang="RU",this.__proto__.CssIds_={SIGN:"sign_in"},this.__proto__.CssClasses_={HIDDEN:"is-hidden",FOCUSED:"is-focused",EYE:"sign-in__view-pass",SHOW_PASS:"sign-in__show-pass"},this.__proto__.Texts_={NAME:{RU:"Имя"},PASS:{RU:"Пароль"},NAME_ERROR:{RU:"Имя уже существует!"},PASS_ERROR:{RU:"Введите пароль не менее 5 символов!"},TITLE:{RU:"Войдите"},SUBMIT:{RU:"Войти"}}}return _createClass(t,[{key:"toggleHandler_",value:function(t,e,n,s){var i=function(e){var i=e.target;if(!e.currentTarget.classList.contains(this.CssClasses_.HIDDEN)&&i.tagName.toLowerCase()===n){var a=i.parentNode.querySelector(s);a&&t.act(i,a)}}.bind(this);this.element_.addEventListener(e,i,!0)}},{key:"toggleLabel_",value:function(){var t=this;this.toggleHandler_({act:function(e,n){n.classList.toggle(t.CssClasses_.FOCUSED,!!e.value)}},"blur","input","label")}},{key:"toggleEye_",value:function(){var t=this;this.toggleHandler_({act:function(e,n){n.classList.toggle(t.CssClasses_.HIDDEN,!e.value.length)}},"input","input","."+this.CssClasses_.EYE)}},{key:"togglePassword_",value:function(){this.toggleHandler_({act:function(t,e){e.type="text"}},"mousedown","button","input"),this.toggleHandler_({act:function(t,e){e.type="password"}},"mouseup","button","input")}},{key:"create",value:function(){var t='\n\t\t\t<div id="sign_in" class="sign-in screen__sign-in animated is-hidden">\n\t\t\t\t<div class="screen__sign-in-inner">\n\t\t\t\t\t<h2 class="screen__display">'+this.Texts_.TITLE[this.lang]+'</h2>\n\t\t\t\t\t<div class="sign-in__row">\n\t\t\t\t\t\t<div class="sign-in__input-field">\n\t\t\t\t\t\t\t<input type="text" id="sign_in_name" class="sign-in__name" value="" />\n\t\t\t\t\t\t\t<label for="sign_in_name">'+this.Texts_.NAME[this.lang]+'</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sign-in__input-error animated is-hidden">'+this.Texts_.NAME_ERROR[this.lang]+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sign-in__row">\n\t\t\t\t\t\t<div class="sign-in__input-field">\n\t\t\t\t\t\t\t<input type="password" id="sign_in_pass" class="sign-in__password" minlength="5" value="" />\n\t\t\t\t\t\t\t<label for="sign_in_pass">'+this.Texts_.PASS[this.lang]+'</label>\n\t\t\t\t\t\t\t<button type="button" class="sign-in__view-pass ml-button--dim is-hidden"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sign-in__input-error animated is-hidden">'+this.Texts_.PASS_ERROR[this.lang]+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button type="submit">'+this.Texts_.SUBMIT[this.lang]+"</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>";return t}},{key:"init",value:function(){this.element_=document.getElementById(this.CssIds_.SIGN),this.element_&&(this.toggleLabel_(),this.toggleEye_(),this.togglePassword_())}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Score=function(){function t(e){_classCallCheck(this,t),this.score={},this.__proto__.CssClasses_={SCORE:"score__score",AVATAR:"score__avatar",HIGHLIGHT:"score__avatar--highlight"},Object.assign(this,e)}return _createClass(t,[{key:"getSumScore",value:function(){return this.score_.reduce(function(t,e){return t+e})}},{key:"getNameRichScore",value:function(){var t=Math.max.apply(null,this.score_);return this.scoreNames_[this.score_.findIndex(function(e){return e===t})]}},{key:"setScore",value:function(t,e){"number"==typeof this.score[t]?this.score[t]+=1:this.score[t]=1,this.displayScore(e,this.score[t])}},{key:"displayScore",value:function(t,e){document.getElementById(t).querySelector("."+this.CssClasses_.SCORE).textContent=e}},{key:"resetScore",value:function(){this.score={};for(var t=document.querySelectorAll("."+this.CssClasses_.SCORE),e=0;e<t.length;e++)t[e].textContent=0}},{key:"highlightAvatar",value:function(t){var e=this,n=Array.from(document.querySelectorAll("."+this.CssClasses_.AVATAR));n.forEach(function(n){return n.classList[n.parentNode.id===t?"add":"remove"](e.CssClasses_.HIGHLIGHT)})}},{key:"create",value:function(){var t='\n\t\t\t<div class="score tttoe__score row">\n\t\t\t\t<div id="player1" class="score__player">\n\t\t\t\t\t<div class="score__avatar">\n\t\t\t\t\t\t<img src="blocks/game/'+this.players.player1+'.png" alt="" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="score__name">'+this.playerFirstName+'</div>\n\t\t\t\t\t<div class="score__score">0</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="player2" class="score__player">\n\t\t\t\t\t<div class="score__avatar">\n\t\t\t\t\t\t<img src="blocks/game/'+this.players.player2+'.png" alt="" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="score__name">'+this.playerSecondName+'</div>\n\t\t\t\t\t<div class="score__score">0</div>\n\t\t\t\t</div>\n\t\t\t</div>';return t}},{key:"scoreNames_",get:function(){return Object.keys(this.score)}},{key:"score_",get:function(){return Object.values(this.score)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Coins=function(){function t(e){_classCallCheck(this,t),this.coinsData={coins:0,getExpInterval:500,getCoins:1,thresholdExp:0},Object.defineProperty(this.coinsData,"needExp",{value:this.coinsData.getExpInterval,writable:!0}),this.randomCoinData={chancePercent:30,added:!1,index:-1},this.__proto__.CssClasses_={COIN:"tttoe__coin",COIN_RAND:"tttoe__coin--random",CELL:"tttoe__cell",FIELD:"tttoe",HIDDEN:"is-hidden"},this.__proto__.CssIds_={COINS:"coins",POINTS:"points"},Object.assign(this,e)}return _createClass(t,[{key:"removeRandomCoin_",value:function(t){var e=t||document.querySelector("."+this.CssClasses_.FIELD).querySelector("."+this.CssClasses_.COIN);e&&(e.remove(),this.randomCoinData.added=!1,this.randomCoinData.index=-1)}},{key:"appendRandomCoin",value:function(){if("vs_computer"===this.mode){this.removeRandomCoin_();var t=getRandomInt(0,101);if(t<=this.randomCoinData.chancePercent){var e=getRandomInt(0,this.fieldSize),n=document.querySelector("."+this.CssClasses_.COIN).cloneNode();n.classList.add(this.CssClasses_.COIN_RAND),n.classList.add(this.CssClasses_.HIDDEN);var s=document.querySelectorAll("."+this.CssClasses_.CELL)[e];s.firstElementChild.appendChild(n),this.randomCoinData.added=!0,this.randomCoinData.index=e}}}},{key:"setCoins",value:function(t,e,n,s){var i=this;return e?(this.coinsData.coins+=e,new Promise(function(t,e){i.displayCoins(n,!1,s).then(function(e){t()})})):void(t>=this.coinsData.needExp&&(this.coinsData.coins+=this.coinsData.getCoins,this.coinsData.thresholdExp+=this.coinsData.getExpInterval,this.coinsData.needExp+=this.coinsData.getExpInterval,this.displayCoins()))}},{key:"displayCoins",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];document.getElementById(this.CssIds_.COINS).textContent=this.coinsData.coins;var i=document.querySelectorAll("."+this.CssClasses_.COIN)[t?1:0];return i.classList.remove(this.CssClasses_.HIDDEN),n&&this.anim.animate(document.getElementById(this.CssIds_.POINTS),"attention_seekers_1"),s&&this.sound.play("coin"),new Promise(function(n,s){e.anim.animate(i,"flippers_0").then(function(s){t&&e.removeRandomCoin_(i),n()})})}},{key:"compareRandomCoinIndex",value:function(t){return!(!this.randomCoinData.added||t!=this.randomCoinData.index)}},{key:"create",value:function(){var t='\n\t\t\t<div class="tttoe__coins">\n\t\t\t\t<div class="tttoe__coin"></div>\n\t\t\t\t<div id="'+this.CssIds_.COINS+'" class="tttoe__coins-count">'+this.coinsData.coins+"</div>\n\t\t\t</div>";return t}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),Experience=function(){function t(e){_classCallCheck(this,t),this.lang="RU",this.level=1,this.levelGrow={value:500,increase:50,bonusPercent:20,bonusLosePercent:5},this.expData={winPointsGame:100,losePercent:20,points:0,partiPoints:0,currentLevelExp:0,nextLevelExp:0},this.volitionData={value:0,interval:10,points:99,increasePercent:20},this.__proto__.CssClasses_={BONUS_WIN:"experience__bonus-win",BONUS_LOSE:"experience__bonus-lose",BONUS_WILL:"experience__bonus-volition",HIDDEN:"is-hidden"},this.__proto__.CssIds_={EXP:"experience",POINTS:"points",BONUS:"bonus",LVL:"level",VOLITION:"volition",MSG:"message"},this.__proto__.Constant_={MSG_ANIM_TIMING:1500,BONUS_TIMING:2e3,SOUND_INTERVAL:500,VOLITION_COLOR:"#545bb0"},this.__proto__.Texts_={NEXT_LVL_TXT:{RU:"След. ур.: "},WILL:{RU:"Воля"},BONUS:{RU:"Бонус"},LOSE:{RU:"Луз"},LEVEL:{RU:"Уровень"},WIN:{RU:"Выиграл"},DRAW:{RU:"Ничья"},YOU:{RU:"Вы"}},Object.assign(this,e)}return _createClass(t,[{key:"setNextLevelExp_",value:function(){return this.expData.nextLevelExp=(this.expData.nextLevelExp||this.expData.currentLevelExp)+this.levelGrow.value+this.level*this.levelGrow.increase,this.expData.nextLevelExp}},{key:"setCurrentLevelExp_",value:function(){1===this.level?this.expData.currentLevelExp=0:this.expData.currentLevelExp=this.expData.currentLevelExp+this.levelGrow.value+(this.level-1)*this.levelGrow.increase-this.expData.currentLevelExp}},{key:"levelUp_",value:function(){this.expData.points>=this.expData.nextLevelExp&&(this.level++,this.expData.currentLevelExp=this.expData.nextLevelExp,this.setNextLevelExp_(),this.displayLevel())}},{key:"levelDown_",value:function(){this.expData.points<this.expData.currentLevelExp&&(this.level--,this.expData.nextLevelExp=this.expData.currentLevelExp,this.setCurrentLevelExp_(),this.displayLevel(!1))}},{key:"setPoints",value:function(t,e){var n=this;return new Promise(function(s,i){"vs_computer"===n.mode&&(e?(n.expData.points="human"===t?n.expData.points+n.bonusPoints_:n.expData.points-n.bonusLosePoints_,n.expData.points=Number.parseInt(n.expData.points),setTimeout(function(e){n.displayBonus(t).then(function(t){s()}),n.expData.partiPoints=0},n.Constant_.MSG_ANIM_TIMING)):(n.expData.points="human"===t?n.expData.points+n.expData.winPointsGame:n.expData.points&&n.expData.points-n.losePoints_,n.expData.partiPoints+="human"===t?n.expData.winPointsGame:0),n.gameWinPoints_>0?n.levelUp_():n.levelDown_(),n.coins.setCoins(n.expData.points),n.displayExperience()),setTimeout(function(){return s()},n.Constant_.MSG_ANIM_TIMING)})}},{key:"setVolition",value:function(){if("vs_computer"===this.mode)if(this.volitionData.value+=1,this.volitionData.value%this.volitionData.interval)this.displayVolition();else{var t=this.volitionData.points+this.volitionData.value*this.volitionData.increasePercent/100,e=this.expData.winPointsGame;this.expData.winPointsGame=t,this.setPoints("human"),this.expData.winPointsGame=e,this.displayVolition(!0,t)}}},{key:"displayBonus",value:function(t,e){var n=this;return new Promise(function(s,i){var a=document.getElementById(n.CssIds_.BONUS),o=null;if(e)o=a.querySelector("."+n.CssClasses_.BONUS_WILL),o.textContent=e;else if("human"===t){if(!(n.bonusPoints_>0))return s();o=a.querySelector("."+n.CssClasses_.BONUS_WIN),o.textContent=+Number.parseInt(n.bonusPoints_)}else{if(!(n.bonusLosePoints_>0))return s();o=a.querySelector("."+n.CssClasses_.BONUS_LOSE),o.textContent=-Number.parseInt(n.bonusLosePoints_)}o.parentNode.classList.remove(n.CssClasses_.HIDDEN),n.sound.play("swing"),n.anim.animate(a.parentNode,"fading_entrances_4",!1,0).then(function(t){setTimeout(function(t){n.sound.play("swing"),n.anim.animate(a.parentNode,"fading_exits_6",void 0,void 0,!0).then(function(t){return o.parentNode.classList.add(n.CssClasses_.HIDDEN)}),s()},n.Constant_.BONUS_TIMING)})})}},{key:"displayLevel",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=document.getElementById(this.CssIds_.LVL).firstElementChild;n.textContent=this.level,document.getElementById(this.CssIds_.EXP).dataset.nextLvl=this.Texts_.NEXT_LVL_TXT[this.lang]+this.expData.nextLevelExp,e&&setTimeout(function(e){t.sound.play("level"),t.anim.animate(n,"bouncing_entrances_0")},this.Constant_.SOUND_INTERVAL+200)}},{key:"displayExperience",value:function(){var t=this.expData.nextLevelExp-this.expData.currentLevelExp,e=document.getElementById(this.CssIds_.EXP);e.firstElementChild.style.width=Number.parseInt(this.gameWinPoints_/t*100)+"%",document.getElementById(this.CssIds_.POINTS).textContent=this.expData.points}},{key:"displayVolition",value:function(t,e){var n=this,s=document.getElementById(this.CssIds_.VOLITION);s.textContent=this.volitionData.value,t&&(this.sound.play("will").then(function(t){n.displayBonus(null,e)}),s.nextElementSibling.style.fill=this.Constant_.VOLITION_COLOR,this.anim.animate(s.nextElementSibling,"attention_seekers_6").then(function(t){s.nextElementSibling.style.fill="#ffffff"}))}},{key:"displayPartiResultMessage",value:function(t){if(t){var e=document.getElementById(this.CssIds_.MSG),n=this.Texts_.WIN[this.lang];switch(t){case"human":n+=this.playerFirstName===this.Texts_.YOU[this.lang]?"и "+this.playerFirstName:" "+this.playerFirstName;break;case"draw":n=this.Texts_.DRAW[this.lang];break;default:n+=" "+this.names[t]}e.textContent=n+"!",this.anim.animate(e,"fading_exits_10",void 0,this.Constant_.MSG_ANIM_TIMING,!0)}}},{key:"createBonus",value:function(){var t='\n\t\t\t<div class="experience__bonus is-hidden">\n\t\t\t\t<div id="bonus">\n\t\t\t\t\t<div class="is-hidden"><span class="experience__bonus-win"></span><span class="experience__bonus-msg">'+this.Texts_.BONUS[this.lang]+'</span></div>\n\t\t\t\t\t<div class="is-hidden"><span class="experience__bonus-lose"></span><span class="experience__bonus-msg">'+this.Texts_.LOSE[this.lang]+'</span></div>\n\t\t\t\t\t<div class="is-hidden"><span class="experience__bonus-volition"></span><span class="experience__bonus-msg">'+this.Texts_.WILL[this.lang]+"</span></div>\n\t\t\t\t</div>\n\t\t\t</div>";return t}},{key:"create",value:function(){var t='\n\t\t\t<div class="row row--right">\n\t\t\t\t<div class="experience__volition" data-title="'+this.Texts_.WILL[this.lang]+'">\n\t\t\t\t\t<div id="volition" class="experience__volition-count">0</div>\n\t\t\t\t\t<svg class="experience__volition-ico" width="42" height="42" fill="#ffffff" aria-hidden="true" data-prefix="fas" data-icon="brain" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M208 0c-29.87 0-54.74 20.55-61.8 48.22-.75-.02-1.45-.22-2.2-.22-35.34 0-64 28.65-64 64 0 4.84.64 9.51 1.66 14.04C52.54 138 32 166.57 32 200c0 12.58 3.16 24.32 8.34 34.91C16.34 248.72 0 274.33 0 304c0 33.34 20.42 61.88 49.42 73.89-.9 4.57-1.42 9.28-1.42 14.11 0 39.76 32.23 72 72 72 4.12 0 8.1-.55 12.03-1.21C141.61 491.31 168.25 512 200 512c39.77 0 72-32.24 72-72V205.45c-10.91 8.98-23.98 15.45-38.36 18.39-4.97 1.02-9.64-2.82-9.64-7.89v-16.18c0-3.57 2.35-6.78 5.8-7.66 24.2-6.16 42.2-27.95 42.2-54.04V64c0-35.35-28.66-64-64-64zm368 304c0-29.67-16.34-55.28-40.34-69.09 5.17-10.59 8.34-22.33 8.34-34.91 0-33.43-20.54-62-49.66-73.96 1.02-4.53 1.66-9.2 1.66-14.04 0-35.35-28.66-64-64-64-.75 0-1.45.2-2.2.22C422.74 20.55 397.87 0 368 0c-35.34 0-64 28.65-64 64v74.07c0 26.09 17.99 47.88 42.2 54.04 3.46.88 5.8 4.09 5.8 7.66v16.18c0 5.07-4.68 8.91-9.64 7.89-14.38-2.94-27.44-9.41-38.36-18.39V440c0 39.76 32.23 72 72 72 31.75 0 58.39-20.69 67.97-49.21 3.93.67 7.91 1.21 12.03 1.21 39.77 0 72-32.24 72-72 0-4.83-.52-9.54-1.42-14.11 29-12.01 49.42-40.55 49.42-73.89z"></path></svg>\n\t\t\t\t</div>\n\t\t\t\t<div class="experience__exp-bar">\n\t\t\t\t\t<span id="'+this.CssIds_.POINTS+'" class="experience__exp-points">'+this.expData.points+'</span>\n\t\t\t\t\t<div id="'+this.CssIds_.EXP+'" class="experience__experience" data-next-lvl="'+this.Texts_.NEXT_LVL_TXT[this.lang]+" "+this.setNextLevelExp_()+'"><span></span></div>\n\t\t\t\t\t<div id="level" class="experience__level">'+this.Texts_.LEVEL[this.lang]+": <span>"+this.level+"</span></div>\n\t\t\t\t</div>\n\t\t\t</div>";
return t}},{key:"losePoints_",get:function(){return Number.parseInt(this.expData.winPointsGame*this.expData.losePercent/100)}},{key:"bonusPoints_",get:function(){return this.expData.partiPoints*this.levelGrow.bonusPercent/100}},{key:"bonusLosePoints_",get:function(){return this.expData.partiPoints*this.levelGrow.bonusLosePercent/100}},{key:"gameWinPoints_",get:function(){return this.expData.points-this.expData.currentLevelExp}}]),t}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),test=!0,Game=function(){function t(e){_classCallCheck(this,t),this.fieldSize=9,this.run="human",this.mode="vs_computer",this.parti=1,this.difficulty="child",this.openMenu=!1,this.openChips=!1,this.animateChips=!0,this.players={player1:"human",player2:"computer"},this.names={human:["Вы","Игрок 1"],computer:"Компьютер",human1:"Игрок 2"},this.tickType={human:"cross",computer:"nil",human1:"nil"},this.numberingAxes={},this.multiplyingAxes={},this.additionAxes={},this.fieldCells={},this.count=0,this.state="",this.store={0:{name:"star",cost:5,side:"x",paid:!1,pick:!1,lock:!0},1:{name:"heart",cost:6,side:"o",paid:!1,pick:!1,lock:!0},2:{name:"paw",cost:11,side:"x",paid:!1,pick:!1,lock:!0},3:{name:"cloud",cost:10,side:"o",paid:!1,pick:!1,lock:!0},4:{name:"snowflake",cost:15,side:"x",paid:!1,pick:!1,lock:!0},5:{name:"flush",cost:16,side:"o",paid:!1,pick:!1,lock:!0},6:{name:"cake",cost:21,side:"x",paid:!1,pick:!1,lock:!0},7:{name:"bomb",cost:20,side:"o",paid:!1,pick:!1,lock:!0},8:{name:"plane",cost:25,side:"x",paid:!1,pick:!1,lock:!0},9:{name:"basketball",cost:26,side:"o",paid:!1,pick:!1,lock:!0},length:10},this.statistics={data:[{name:"Саша",volition:50,coins:100,chip:"star",level:5},{name:"Виктор",volition:30,coins:70,chip:"heart",level:3}],fields:{ru:["Ник","Воля","Монеты","Фишка","Уровень"]},limit:1},this.__proto__.CssClasses_={FIELD:"tttoe",INNER:"tttoe__inner",CELL:"tttoe__cell",TICK:"tttoe__tick",STORE:"tttoe__store",CHIP:"tttoe__chip",CHIPS_FOOT:"tttoe__chip-footer",CHIP_PAID:"tttoe__chip-paid",CHIPS:"tttoe__chips",CHIP_PICK:"tttoe__chip--pick",WIN:"tttoe__cell--winner",HIDDEN:"is-hidden",AVATAR:"tttoe__avatar",MENU:"tttoe__menu",BUTTON_ACT:"tttoe__button-action",LOCK:"tttoe__chip-lock",UNLOCK_CHIPS:"tttoe__chips-unlock",CONFETTI_STATIC:"tttoe__chips-confetti",STATISTICS:"tttoe__statistics",ABOUT:"tttoe__about",ANIMATED:"animated"},this.__proto__.CssIds_={APP:"game",CURSOR:"comp_cursor",WRP:"wrapper",CONTAINER:"container",BAR:"menu_bar",CHIPS_BAR:"chips_bar",RESUME:"resume",MAIN_MENU:"main_menu",HOTKEYS:{f10:"menu",f:"chips"},FIELD_WRP:"field_wrp"},this.__proto__.Constant_={SHAKE_TIMING:2e3,CONFETTI_TIMING:2e3,TICK_TIMING:500,ANIM_TIMING:1e3,RESTART_PARTI:1e3,MOVE_ANIMATION:1e3},this.__proto__.Texts_={NEW_CHIP:{RU:"Новая фишка!"}},Object.assign(this,e),this.partiRun=this.run}return _createClass(t,[{key:"countAxesValues_",value:function(){for(var t=this,e=["x","y","z"],n=this.doCells_(),s=Math.sqrt(this.fieldSize),i=function(i){var a=t.doMatrix_(n,s,e[i]);t.numberingAxes[e[i]]=a;var o=t.doMatrix_(n,s,e[i]);t.computeCells_(o),t.multiplyingAxes[e[i]]=o.reduce(function(t,e){return t.concat(e)});var r=t.doMatrix_(n,s,e[i]);t.additionAxes[e[i]]=t.sumAxissRows_(r),t.computeCells_(r,!1),t.additionAxes[e[i]].forEach(function(t,e){return t[Object.keys(t)[0]]=r[e]})},a=0;a<e.length;a++)i(a)}},{key:"doCells_",value:function(){for(var t=[],e=1;e<=this.fieldSize;e++)t.push(e);return t}},{key:"doMatrix_",value:function(t,e,n){function s(n,i,a){i=i||[],n=n,a=a;for(var o=1;o<=t.length;o++)o%e===1&&a.push(o+(i.length?n--:n++));return i.push(a),1===i.length?s(e-1,i,[]):i}var i=[],a=[];if("z"===n)return s(0,i,a);"y"===n&&(t=t.slice(0).sort(function(t,n){return t%e-n%e}));for(var o=1;o<=t.length;o++)a.push(t[o-1]),o%e||(i.push(a),a=[]);return i}},{key:"computeCells_",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach(function(t,n,s){var i=[];!function a(t){t.reduce(function(t,n,s,o){return o.length>1&&i.push(e?t*n:t+n),n===o[o.length-1]&&(o.shift(),a(o)),t})}(t),s[n]=i})}},{key:"sumAxissRows_",value:function(t){return t.map(function(t){var e=t.reduce(function(t,e){return t+e}),n={};return n[e]=[],n})}},{key:"makeFieldCells_",value:function(){for(var t=0;t<this.fieldSize;t++)this.fieldCells[t]={ticked:!1,tickType:"",position:t+1};this.fieldCells.length=this.fieldSize}},{key:"makeViewField_",value:function(){for(var t=document.createElement("table"),e=Math.sqrt(this.fieldSize),n=0;n<e;n++){for(var s=document.createElement("tr"),i=0;i<e;i++){var a=document.createElement("td");a.className=this.CssClasses_.CELL,a.id=e*n+i;var o=document.createElement("div");o.className=this.CssClasses_.FIELD+"__inner",a.appendChild(o),s.appendChild(a)}t.appendChild(s)}return t.className=this.CssClasses_.FIELD,t}},{key:"makeView_",value:function(){var t=this,e='\n\t\t\t<div id="container" class="layout__container is-hidden">\n\t\t\t\t<div id="game" class="layout__game">\n\t\t\t\t\t<div class="layout__header">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="tttoe__coins">\n\t\t\t\t\t\t\t\t<div class="tttoe__coin"></div>\n\t\t\t\t\t\t\t\t<div id="'+this.coins.CssIds_.COINS+'" class="tttoe__coins-count">'+this.coins.coinsData.coins+'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div id="chips_bar" class="tttoe__chips-bar">\n\t\t\t\t\t\t\t\t\t<button class="tttoe__button-action ml-button--dim" data-popup="'+this.CssClasses_.CHIPS+'">\n\t\t\t\t\t\t\t\t\t\t<div class="tttoe__chips-bar-ico"></div>\n\t\t\t\t\t\t\t\t\t\t<div id="f" class="tttoe__key">f</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="menu_bar" class="tttoe__menu-bar">\n\t\t\t\t\t\t\t\t\t<button class="tttoe__button-action ml-button--dim" data-popup="'+this.CssClasses_.MENU+'">\n\t\t\t\t\t\t\t\t\t\t<div class="tttoe__menu-bar-ico"></div>\n\t\t\t\t\t\t\t\t\t\t<div id="f10" class="tttoe__key">f10</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'+this.score.create()+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="layout__middle">\n\t\t\t\t\t\t<div id="'+this.CssIds_.FIELD_WRP+'" class="tttoe__field-wrp row row--center">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div id="comp_cursor" class="tttoe__computer-cursor is-hidden"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="layout__footer">\n\t\t\t\t\t\t'+this.experience.create()+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="layout__popups">\n\t\t\t\t\t\t<div class="tttoe__chips layout__substrate is-hidden" data-flag="openChips">\n\t\t\t\t\t\t\t<div class="tttoe__chips-inner layout__popup">\n\t\t\t\t\t\t\t\t<h3>Магазин</h3>\n\t\t\t\t\t\t\t\t<div class="row row--left">\n\t\t\t\t\t\t\t\t\t'+this.fillStore()+'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button class="tttoe__chips-close tttoe__button-action ml-button--dim" type="button"></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tttoe__statistics layout__substrate is-hidden">\n\t\t\t\t\t\t\t<div class="tttoe__statistics-inner layout__popup">\n\t\t\t\t\t\t\t\t<h3>Статистика</h3>\n\t\t\t\t\t\t\t\t<div class="row row--left">\n\t\t\t\t\t\t\t\t\t'+this.fillStatistics()+"\n\t\t\t\t\t\t\t\t\t"+this.pagination.create()+'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button class="tttoe__chips-close tttoe__button-action ml-button--dim" type="button"></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tttoe__about layout__substrate is-hidden">\n\t\t\t\t\t\t\t<div class="tttoe__about-inner layout__popup">\n\t\t\t\t\t\t\t\t<h3>Об игре</h3>\n\t\t\t\t\t\t\t\t<p class="tttoe__about-text">Крестики-нолики - игра нашего детства.\n\t\t\t\t\t\t\t\tИграйте против компьютера, друга или по сети.\n\t\t\t\t\t\t\t\tПолучайте опыт, прокачивайте уровень и открывайте эпичные фишки в магазине.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div class="tttoe__affiliate"></div>\n\t\t\t\t\t\t\t\t<p><b>Разработчик</b><br>Александр Радевич</p>\n\t\t\t\t\t\t\t\t<p><a href="http://operari.by" target="_blank">OPERARI</a></p>\n\t\t\t\t\t\t\t\t<button class="tttoe__chips-close tttoe__button-action ml-button--dim" type="button"></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tttoe__menu layout__substrate is-hidden" data-flag="openMenu">\n\t\t\t\t\t\t\t<div class="game-menu">\n\t\t\t\t\t\t\t\t<button id="'+this.CssIds_.RESUME+'" class="game-menu__action tttoe__button-action bg-color--blue">Вернуться</button>\n\t\t\t\t\t\t\t\t<button class="game-menu__action tttoe__button-action bg-color--pink" data-popup="'+this.CssClasses_.STATISTICS+'">Статистика</button>\n\t\t\t\t\t\t\t\t<button class="game-menu__action tttoe__button-action bg-color--gold" data-popup="'+this.CssClasses_.ABOUT+'">Об игре</button>\n\t\t\t\t\t\t\t\t<button id="'+this.CssIds_.MAIN_MENU+'" class="game-menu__action tttoe__button-action bg-color--purple">Главное меню</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tttoe__chips-unlock is-hidden">\n\t\t\t\t\t\t\t<div class="tttoe__chips-confetti">\n\t\t\t\t\t\t\t\t<img src="blocks/game/confetti.png" alt="" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="message" class="tttoe__message animated--msg is-hidden"></div>\n\t\t\t\t\t\t'+this.experience.createBonus()+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t",n=this.makeViewField_();return new Promise(function(s,i){var a=function(i){var a=document.getElementById(t.CssIds_.WRP);a.insertAdjacentHTML("beforeend",e),t.fieldElement=document.getElementById(t.CssIds_.APP),document.getElementById(t.CssIds_.FIELD_WRP).firstElementChild.appendChild(n),t.showView_(),s()};"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)})}},{key:"showView_",value:function(){var t=document.getElementById(this.CssIds_.CONTAINER);this.anim.animate(t,"fading_entrances_0")}},{key:"fillStore",value:function(){for(var t="",e=0;e<this.store.length;e++){var n=this.store[e],s='<button class="tttoe__chip tttoe__button-action ml-button--dim" data-index="'+e+'" '+(n.lock?"disabled":"")+'>\n\t\t\t\t\t<div class="tttoe__chip-ico tttoe__'+n.name+'"></div>\n\t\t\t\t\t<div class="tttoe__chip-footer">\n\t\t\t\t\t\t<span class="tttoe__coin tttoe__coin--mini animated"></span>\n\t\t\t\t\t\t<span class="tttoe__chip-cost">'+n.cost+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t"+(n.lock?'<div class="tttoe__chip-lock"><div></div></div>':"")+'\n\t\t\t\t\t<div class="tttoe__chip-side">'+n.side+"</div>\n\t\t\t\t</button>";t+=s}return t}},{key:"fillStatistics",value:function(){for(var t=document.createElement("table"),e=function(){var e=document.createElement("tr");return t.appendChild(e),e},n=e(),s=0;s<this.statistics.fields.ru.length;s++){var i=document.createElement("th");i.textContent=this.statistics.fields.ru[s],n.appendChild(i)}for(var a=0;a<this.statistics.data.length&&!(a+1>this.statistics.limit);a++){var o=this.statistics.data[a],r=e();for(var l in o){var c=document.createElement("td");"chip"===l?c.innerHTML='<div class="tttoe__chip-ico tttoe__chip-ico--mini tttoe__'+o[l]+'"></div>':"name"===l?c.innerHTML="<span></span><span>"+o[l]+"</span>":c.textContent=o[l],r.appendChild(c)}}return t.outerHTML}},{key:"makeMove_",value:function(){switch(this.mode){case"vs_human":"human"===this.run?this.doHuman(this.players.player1,this.players.player2):this.doHuman(this.players.player2,this.players.player1);break;case"training":default:"human"===this.run?this.doHuman(this.players.player1,this.players.player2):this.doComputer()}this.score.highlightAvatar(this.getPlayerId_(this.run),!0)}},{key:"actionsAfterPartiOver_",value:function(t,e){var n=this;return new Promise(function(s,i){n.score.setScore(n.run,n.getPlayerId_(n.run)),n.experience.setPoints(n.run),n.displayWinnerThrough(t,e),n.switchPartiPlayer_();var a=n.getGameWinner_();if(a){n.experience.displayPartiResultMessage(a);var o=n.getGameLoser_(a),r=n.getPlayerId_(a),l=n.getPlayerId_(o);n.throwConfetti(document.getElementById(r),n.Constant_.CONFETTI_TIMING),n.anim.animate(document.getElementById(l).querySelector("."+n.CssClasses_.AVATAR),"attention_seekers_11",!0,n.Constant_.SHAKE_TIMING),n.experience.setPoints(a,!0).then(function(t){n.score.resetScore(),s()})}else n.sound.play("point"),setTimeout(function(t){return s()},n.Constant_.RESTART_PARTI)})}},{key:"checkWinnerCombination_",value:function(t,e){function n(t){for(var e=function(e){var n=t[e],s=!1;if(i.length===n.length?s=i.every(function(t){return n.some(function(e){return t===e})}):i.length>n.length&&(s=n.every(function(t){return i.some(function(e){return t===e})})),s)return{v:n}},n=0;n<t.length;n++){var s=e(n);if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}return!1}var s=this,i=Array.from(this.fieldCells).filter(function(t){return t.ticked&&t.tickType===s.tickType[e]}).map(function(t){return t.position});if(t){var a=this.numberingAxes[t];return n.call(this,a)}var o=[],r=[];for(var l in this.numberingAxes){var c=this.numberingAxes[l];r.push(n.call(this,c)),o.push(l)}var u=r.findIndex(function(t){return t.length});if(~u)return{comb:r[u],axis:this.makeRotateAxisClass_(o[u],r[u])}}},{key:"getRandomCell_",value:function(){var t=!1,e=void 0;do e=getRandomInt(0,this.fieldSize),t=this.isTickedCell_(e);while(t===!0);return e+1}},{key:"isTickedCell_",value:function(t){return!!this.fieldCells[t].ticked}},{key:"analysis_",value:function(){var t={};if(this.count<2)t.cell=this.getRandomCell_();else{var e=this.filterCells_(),n=this.makePotentialCells_(e.emptyCells,e.computerCells,"computer"),s=this.makePotentialCells_(e.emptyCells,e.humanCells,"human");if(n.cell)if("child"===this.difficulty&&this.count<=this.fieldSize-2){var i=this.getRandomCell_();i===n.cell?(this.state="win",t=n):t.cell=i}else this.state="win",t=n;else if(s.cell)switch(this.difficulty){case"hard":t.cell=s.cell;break;case"easy":t.cell=n.length?this.chooseRandomCell_(n):s.cell;break;default:t.cell=this.getRandomCell_()}else n.length?t.cell=this.chooseRandomCell_(n):s.length?t.cell=this.chooseRandomCell_(s):(this.state="draw",t.cell=e.emptyCells[0]?e.emptyCells[0].position:-1)}return t}},{key:"filterCells_",value:function(){var t=this,e=Array.from(this.fieldCells),n={};return n.emptyCells=e.filter(function(t){return!t.ticked}),n.humanCells=e.filter(function(e){return e.tickType===t.tickType.human}),n.computerCells=e.filter(function(e){return e.tickType===t.tickType.computer}),n}},{key:"makePotentialCells_",value:function(t,e,n){for(var s=[],i=0;i<t.length;i++){var a=this.getPlayerPotentialCells_(t[i].position,e,n);if(a){if(!Array.isArray(a))return a;s.push(a)}}return s}},{key:"getPlayerPotentialCells_",value:function(t,e,n){for(var s=[],i=0;i<e.length;i++){var a=e[i].position,o=a*t,r=this.getAxis_(o);if(r){var l=a+t,c=this.getPotentialCell_(r,l);if(c){var u=this.fieldCells[c-1];if(u.ticked){if(u.tickType===this.tickType[n]){var d=this.doTestTick_(t,n);if(d){var _=this.checkWinnerCombination_(r,n);if(this.doTestTick_(t,!1,!1),_)return{cell:t,comb:_,axis:this.makeRotateAxisClass_(r,_)}}}}else s.push(c)}}}return!!s.length&&s}},{key:"getPotentialCell_",value:function(t,e){for(var n=this.additionAxes[t],s=0;s<n.length;s++){var i=Object.keys(n[s])[0],a=n[s][i],o=a.some(function(t){return t===e});if(o)return i-e}return!1}},{key:"doTestTick_",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=t-1;return n?(this.fieldCells[s].ticked=!0,this.fieldCells[s].tickType=this.tickType[e],!0):(this.fieldCells[s].ticked=!1,this.fieldCells[s].tickType="",!1)}},{key:"getAxis_",value:function(t){for(var e in this.multiplyingAxes){var n=this.multiplyingAxes[e],s=n.some(function(e){return e===t});if(s)return e}return!1}},{key:"makeRotateAxisClass_",value:function(t,e){return t="z"===t&&e.some(function(t){return 3===t})?t+"-45":t}},{key:"chooseRandomCell_",value:function(t){t=t.reduce(function(t,e){return t.concat(e)});var e=new UniqueArray(t),n=e.unique(),s=getRandomInt(0,n.length),i=n[s];return i}},{key:"unlockChips",value:function(){var t=this,e=Array.from(this.store).filter(function(e){return e.cost<=t.coinsData.coins&&e.lock}),n=[];if(e.length&&e.forEach(function(e){e.lock=!1;var s=document.querySelector("."+t.CssClasses_.FIELD+"__"+e.name),i=s.parentNode;i.disabled=!1,i.querySelector("."+t.CssClasses_.LOCK).remove(),n.push(s)}),this.animateChips){var s=0;(function i(t,e){var n=this;e!==t.length&&this.displayUnlockChip(t[e]).then(function(s){return i.call(n,t,++e)})}).call(this,n,s)}}},{key:"getGameWinner_",value:function(){return this.score.getSumScore()===this.parti&&(this.sound.play("win"),this.score.getNameRichScore())}},{key:"getGameLoser_",value:function(t){var e=Object.values(this.players),n=e.findIndex(function(e){return e!==t});return e[n]}},{key:"getPlayerId_",value:function(t){for(var e in this.players)if(this.players[e]===t)return e;return!1}},{key:"switchPartiPlayer_",value:function(){var t=this,e=Object.values(this.players);this.run=this.partiRun=e.find(function(e){return e!==t.partiRun})}},{key:"getClassPickedChip",value:function(t){var e=this;if("computer"!==this.run){var n=Array.from(this.store).find(function(n){return n.pick&&n.side===e.transSymbolTextSide(t)});if(n)return" "+this.CssClasses_.FIELD+"__"+n.name}return""}},{key:"displayUnlockChip",value:function(t){var e=this;return new Promise(function(n,s){var i=document.querySelector("."+e.CssClasses_.UNLOCK_CHIPS),a=i.querySelector("."+e.CssClasses_.CONFETTI_STATIC),o=document.querySelector("."+e.CssClasses_.BUTTON_ACT),r=t.cloneNode();r.classList.add(e.CssClasses_.ANIMATED);var l=document.createElement("span");l.textContent=e.Texts_.NEW_CHIP.RU,l.className=e.CssClasses_.ANIMATED,r.appendChild(l),i.appendChild(r),e.sound.play("swing"),o.disabled=!0,i.classList.toggle(e.CssClasses_.HIDDEN),e.anim.animate(a,"bouncing_entrances_1",!1),e.anim.animate(r,"bouncing_entrances_4",!1).then(function(t){e.anim.animate(l,"attention_seekers_9",!1,0),e.sound.play("tada").then(function(t){e.sound.play("swing"),e.anim.animate(a,"boucing_exits_1"),e.anim.animate(r,"boucing_exits_4").then(function(t){r.remove(),o.disabled=!1,i.classList.toggle(e.CssClasses_.HIDDEN),n()})})})})}},{key:"restartParti_",value:function(){var t=this;return new Promise(function(e,n){for(var s=Array.from(t.fieldCells),i=0;i<s.length;i++){s[i].ticked=!1,s[i].tickType="";var a=document.getElementById(i),o=Array.from(a.classList).find(function(t){return/winner/.test(t)});a.classList.remove(o);var r=a.querySelector("."+t.CssClasses_.TICK);r&&r.remove(),t.count=0,t.state=""}t.coins.appendRandomCoin(),e()})}},{key:"toggleScoreChipsDisplay",value:function(t,e){var n=this,s=t.classList.toggle(this.CssClasses_.CHIP_PICK);this.store[e].pick=s;var i=Array.from(document.querySelectorAll("."+this.CssClasses_.CHIP)),a=i.filter(function(t,s){return n.store[s].pick&&s!=e})[0];if(a){a.classList.remove(this.CssClasses_.CHIP_PICK);var o=this.store[a.dataset.index];return o.pick=!1,o}return!1}},{key:"toggleFieldChipsDisplay",value:function(t){var e=this,n=this.transSymbolTextSide(t.side),s=document.querySelectorAll("."+this.CssClasses_.TICK+"--"+n);s.length&&this.tickType.human===n&&Array.from(s).forEach(function(n){return n.classList.toggle(e.CssClasses_.FIELD+"__"+t.name)})}},{key:"transSymbolTextSide",value:function(t){return 1===t.length?"x"===t?"cross":"nil":"cross"===t?"x":"o"}},{key:"draw_",value:function(){var t=this;return this.count===this.fieldSize&&(this.experience.displayPartiResultMessage("draw"),this.switchPartiPlayer_(),this.sound.play("draw").then(function(e){t.experience.setVolition(),setTimeout(function(){t.restartParti_().then(function(e){t.makeMove_()})},t.Constant_.RESTART_PARTI)}),!0)}},{key:"computerMoveAnimation_",value:function(t){var e=this;return new Promise(function(n,s){if(t>=0){var i=document.getElementById(t),a=i.offsetWidth/2,o=document.getElementById(e.CssIds_.CURSOR),r=i.offsetTop+a-o.offsetTop-o.offsetHeight+"px",l=o.offsetLeft-i.offsetLeft-a+"px";o.classList.remove(e.CssClasses_.HIDDEN),o.style.top=r,o.style.right=l,setTimeout(function(t){o.classList.add(e.CssClasses_.HIDDEN),o.style.top="",o.style.right="",n()},e.Constant_.MOVE_ANIMATION)}else n()})}},{key:"registerCallPopups_",value:function(){var t=this;document.addEventListener("click",function(e){var n=t.findNode_(e);if(n){var s=n.dataset&&n.dataset.popup;if(s&&!n.disabled){var i=document.querySelector("."+n.dataset.popup),a=t.popupToggle(i);"boolean"==typeof a&&a&&t[s.replace(/^.+__/,"")+"Actions_"](i)}}})}},{key:"actionsHandler_",value:function(t,e){function n(n){var s=n.target.closest("button")||n.target.closest("a");s&&(t.act(s,e),/(\b|__)close\b/.test(s.className)&&this.popupToggle(e))}this.bindedHandler=n.bind(this),this.bindedElem=e,e.addEventListener("click",this.bindedHandler)}},{key:"menuActions_",value:function(t){var e=this;this.actionsHandler_({act:function(t,n){e.popupToggle(n).then(function(n){t.id===e.CssIds_.MAIN_MENU&&e.restartGame()})}},t)}},{key:"chipsActions_",value:function(t){var e=this;this.actionsHandler_({act:function(t,n){if(t.classList.contains(e.CssClasses_.CHIP)&&!t.disabled){var s=t.dataset.index,i=e.store[s];if(e.buyChip(i,s)){var a=e.toggleScoreChipsDisplay(t,s);a&&e.toggleFieldChipsDisplay(a),e.toggleFieldChipsDisplay(i)}else e.sound.play("coin1")}}},t)}},{key:"statisticsActions_",value:function(t){this.pagination.toggleActive(),this.actionsHandler_({act:function(t,e){console.log("act")}},t)}},{key:"aboutActions_",value:function(t){this.actionsHandler_({act:function(t,e){}},t)}},{key:"buyChip",value:function(t,e){return!t.paid&&this.coinsData.coins-t.cost>=0?(this.setCoins(-t.cost,!1,!1),document.querySelector('button[data-index="'+e+'"]').querySelector("."+this.CssClasses_.CHIPS_FOOT).innerHTML='<div class="'+this.CssClasses_.CHIP_PAID+'"></div>',this.sound.play("coins"),t.paid=!0):t.paid}},{key:"restartGame",value:function(){var t=document.getElementById(this.CssIds_.CONTAINER);this.anim.animate(t,"fading_exits_0").then(function(e){t.remove();var n=new Screen;n.init();var s=new ToggleScreen;s.close()})}},{key:"findNode_",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.CssClasses_.BUTTON_ACT;return t.target.closest("."+e)}},{key:"soundOfButtons_",value:function(){var t=this;document.addEventListener("click",function(e){var n=t.findNode_(e);n&&(n.disabled&&[].concat(_toConsumableArray(n.children)).some(function(e){return e.classList.contains(t.CssClasses_.LOCK)})?t.sound.play("lock"):t.sound.play("click"))}),document.addEventListener("mouseover",function(e){var n=t.findNode_(e);n&&(n.dataset.hover||(t.sound.play("hover"),setTimeout(function(){n.dataset.hover=""},1e3)),n.dataset.hover=1)})}},{key:"triggers_",value:function(){var t=this;document.addEventListener("keyup",function(e){var n=Object.keys(t.CssIds_.HOTKEYS),s=n.find(function(t){return t===e.key&&e.key.toLowerCase()});s&&(t.bindedElem&&t.bindedElem.removeEventListener("click",t.bindedHandler),document.getElementById(s).closest("button").click())})}},{key:"doHuman",value:function(t,e,n){function s(n){var s=this,a=n.target,o=a.closest("td");if("DIV"===a.tagName&&o){var r=o.id,l=this.tick(r,this.tickType[t]);if(l){this.fieldElement.removeEventListener("click",i);var c=this.checkWinnerCombination_(!1,t);if(c)this.actionsAfterPartiOver_(c.comb,c.axis).then(function(t){s.restartParti_().then(function(t){s.makeMove_()})});else{if("computer"!==this.players.player2&&this.draw_())return;this.run=e,this.coins.compareRandomCoinIndex(r)?this.coins.setCoins(this.experience.expData.points,1,!0).then(function(t){s.makeMove_()}):this.makeMove_()}}}}var i=s.bind(this);"computer"!==this.run&&(Number.isInteger(n)&&n>=0&&n<=this.fieldSize-1?i({target:document.getElementById(n).firstElementChild}):this.fieldElement.addEventListener("click",i))}},{key:"doComputer",value:function(){var t=this,e=this.analysis_(),n=e.cell-1;this.computerMoveAnimation_(n).then(function(s){var i=t.tick(n,t.tickType[t.players.player2]);t.state=t.count===t.fieldSize&&"win"!==t.state?"draw":t.state,"win"===t.state?i&&t.actionsAfterPartiOver_(e.comb,e.axis).then(function(e){t.restartParti_().then(function(e){t.makeMove_()})}):"draw"===t.state?(t.count=t.fieldSize,t.draw_()):i&&setTimeout(function(){t.run="human",t.makeMove_()},t.Constant_.TICK_TIMING)})}},{key:"tick",value:function(t,e){return!(!this.fieldCells[t]||this.fieldCells[t].ticked)&&(this.fieldCells[t].ticked=!0,this.fieldCells[t].tickType=e,this.displayTick(t,e),this.sound.play("tick"),this.count++,!0)}},{key:"displayTick",value:function(t,e){var n=document.createElement("div");n.className=this.CssClasses_.TICK+" "+this.CssClasses_.TICK+"--"+e+this.getClassPickedChip(e),this.fieldElement.querySelectorAll("td")[t].firstElementChild.appendChild(n)}},{key:"displayWinnerThrough",value:function(t,e){for(var n=0;n<t.length;n++)this.fieldElement.querySelectorAll("td")[t[n]-1].classList.add(this.CssClasses_.WIN+"-"+e)}},{key:"popupToggle",value:function(t){var e=this,n=t.dataset.flag;return this[n]?(t.removeEventListener("click",this.bindedHandler),new Promise(function(s,i){e[n]=!e[n],e.anim.animate(t,"fading_exits_0",void 0,void 0,!0).then(function(t){return s()})})):(this.anim.animate(t,"fading_entrances_0",!1,0),this[n]=!this[n],!0)}},{key:"throwConfetti",value:function(t,e){if(t){var n=new Confetti("confetti",150);return t.appendChild(n),new Promise(function(t,s){setTimeout(function(e){n.remove(),t()},e)})}return!1}},{key:"init",value:function(){var t=this;return this.countAxesValues_(),this.makeFieldCells_(),new Promise(function(e,n){t.pagination=new Pagination(t.statistics.data.length,t.statistics.limit),t.score=new Score({players:t.players,names:t.names,playerFirstName:t.playerFirstName,playerSecondName:t.playerSecondName}),t.coins=new Coins({fieldSize:t.fieldSize,mode:t.mode,sound:t.sound,anim:t.anim}),t.experience=new Experience({mode:t.mode,coins:t.coins,sound:t.sound,anim:t.anim,names:t.names,playerFirstName:t.playerFirstName,playerSecondName:t.playerSecondName}),t.makeView_().then(function(n){t.coins.appendRandomCoin(),t.soundOfButtons_(),t.triggers_(),t.registerCallPopups_(),e()})})}},{key:"playerFirstName",get:function(){return this.names[this.players.player1]["computer"===this.players.player2?0:1]}},{key:"playerSecondName",get:function(){return this.names[this.players.player2]}}]),t}();if(test){var sound=new Sound,anim=new Animation,game=new Game({sound:sound,anim:anim});game.init().then(function(t){return game.makeMove_()})}